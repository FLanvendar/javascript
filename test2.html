<html>
<body>
    <script>
        var OfflightState = function (light) {
            this.light = light
        }
        OfflightState.prototype.buttonWasPressed = function () {
            console.log('weak light')
            this.light.setState(this.light.weakLightState)
        }
        var WeakLightState = function (light) {
            this.light = light
        }
        WeakLightState.prototype.buttonWasPressed = function () {
            console.log('strong light')
            this.light.setState(this.light.strongLightState)
        }
        var StrongLightState = function (light) {
            this.light = light
        }
        StrongLightState.prototype.buttonWasPressed = function () {
            console.log( '关灯' ); // strongLightState 对应的行为
            this.light.setState( this.light.offLightState );
        }
        var Light = function () {
            this.offLightState = new OfflightState(this)
            this.weakLightState = new WeakLightState(this)
            this.strongLightState = new StrongLightState(this)
            this.button = null
        }
        Light.prototype.init = function () {
            var button = document.createElement('button')
            self = this
            this.button = document.body.appendChild(button)
            this.button.innerHTML = '开关'
            this.currentState = this.offLightState
            this.button.onclick = function () {
                self.currentState.buttonWasPressed()
            }
        }
        Light.prototype.setState = function (newState) {
            this.currentState = newState
        }
        var light = new Light()
        light.init()

    </script>
    </body>
</html>